# test.yaml
name: "HTTP Endpoint Test"
testcases:
  - name: "Send JSON message and check status code is 200"
    steps:
      - type: http
        method: POST
        url: "http://host.docker.internal:8080/send"
        headers:
          Content-Type: "application/json"
        body: |
          {
            "key": "testkey",
            "value": "testvalue"
          }
        assertions:
          - result.statuscode ShouldEqual 200

      - type: http
        method: POST
        url: "http://host.docker.internal:8000"
        headers:
          Content-Type: "application/json"
          X-Amz-Target: "DynamoDB_20120810.Scan"
          Host: "host.docker.internal:8000"
          X-Amz-Date: "20241106T214338Z"
          Authorization: "AWS4-HMAC-SHA256 Credential=dummy/20281106T214338/us-east-1/dynamodb/aws4_request, SignedHeaders=host;x-amz-date, Signature=dummy-signature"
        body: |
          {
            "TableName": "KafkaMessages",
            "Operation": "Scan"
          }
        assertions:
          - result.statuscode ShouldEqual 200
